<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Huntrix - Register</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.1.4/css/boxicons.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
</head>
<body class="bg">
  <!-- Header -->
  <header>
    <a href="#" class="name">HUNTRIX</a>
    <nav class="nav">
      <div class="nav-items">
        <a href="index.html">Home</a>
        <a href="character.html" target="_blank">Characters</a>
        <a href="Gallery.html" target="_top">Gallery</a>
        <a href="songs.html">Songs</a>
        <a href="about.html">About</a>
        <button>Download</button>
      </div>
    </nav>
    <i class="fa fa-bars ham" id="openMenu"></i>
    <i class="fa fa-times " id="closeMenu"></i>
  </header>

  <!-- Registration Form -->
  <main class="wrapper">
    <form id="registerForm">
      <h1>Create Account</h1>
      <div class="input-box">
        <input type="text" name="username" placeholder="Username" required>
        <i class='bx bxs-user'></i>
      </div>
      <div class="input-box">
        <input type="password" name="password" placeholder="Password" required>
        <i class='bx bxs-lock'></i>
      </div>
      <div class="input-box">
        <input type="password" name="confirmPassword" placeholder="Confirm Password" required>
        <i class='bx bxs-lock'></i>
      </div>
      <button type="submit" class="btn">Create Account</button>
    </form>
  </main>

  <script>

 const openMenu = document.getElementById('openMenu');
const closeMenu = document.getElementById('closeMenu');
const navItems = document.querySelector('.nav-items');

// Show menu
openMenu.addEventListener('click', () => {
  navItems.classList.add('active');
  openMenu.style.display = 'none';
  closeMenu.style.display = 'block';
});

// Hide menu
closeMenu.addEventListener('click', () => {
  navItems.classList.remove('active');
  closeMenu.style.display = 'none';
  openMenu.style.display = 'block';
});

// Optional: Close if nav item is clicked
navItems.addEventListener('click', (e) => {
  if (e.target.tagName === 'A' || e.target.tagName === 'BUTTON') {
    navItems.classList.remove('active');
    closeMenu.style.display = 'none';
    openMenu.style.display = 'block';
  }
});
// Registration form handling
document.getElementById("registerForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const form = e.target;
  const username = form.username.value.trim();
  const password = form.password.value;
  const confirmPassword = form.confirmPassword.value;

  // 1️⃣ Simple validation
  if (!username || !password || !confirmPassword) {
    alert("Please fill in all fields.");
    return;
  }

  if (password !== confirmPassword) {
    alert("Passwords do not match!");
    return;
  }

  // 2️⃣ Disable submit button to prevent double-clicks
  const submitBtn = form.querySelector('button[type="submit"]') || form.querySelector('button');
  if (submitBtn) {
    submitBtn.disabled = true;
    submitBtn.textContent = "Registering...";
  }

  // 3️⃣ Prepare data
  const data = { username, password };

  try {
    const res = await fetch("https://huntrix-backend-0a1b.onrender.com/register", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    const result = await res.json();

    // 4️⃣ Handle response
    if (!res.ok) {
      alert(result.error || "Registration failed — try a different username.");
      return;
    }

    alert(result.message || "Registration complete!");
    
    // 5️⃣ Redirect to login
    window.location.href = "login.html";

  } catch (err) {
    console.error("Registration error:", err);
    alert("❌ Could not contact server. Try again later.");
  } finally {
    if (submitBtn) {
      submitBtn.disabled = false;
      submitBtn.textContent = "Register";
    }
  }
});
</script>
</body>
</html>
